<!DOCTYPE html>
<!--Starpage by -->
<html id="html" data-theme="default">
<head>
	<meta charset="utf-8">
	<title>New Tab</title>
	<link rel="stylesheet" style="text/css" href="general.css" />
</head>
<body>
	<div class="main" style="display: block">
		<div class="image-wrapper">

			<div class="mySlides fade">
				<img src="img/side1.gif">
			</div>

			<a class="next" onclick="plusSlides(1)">&#8734;</a>
		</div>
		<br>

		<header>
			<br>
			<h1 ><span id="greet">Hello</span>, <span class="flair">Alex</span></h1>
		</header>

		<nav>
			<br>

			<ul class="green">
				<li style="font-size:22px">Game</li>
				<li><a href="https://forum.square-enix.com/ffxiv/forums/778">XIV Allgemein</a></li>
				<li><a href="https://de.finalfantasyxiv.com/lodestone/my/">Lodestone</a></li>	
				<li><a href="https://forum.square-enix.com/ffxiv/forums/667-General-Discussion">General Discussion</a></li>							
			</ul>

			<ul class="red">
				<li style="font-size:22px">Tech</li>
				<li><a href="https://github.com/">Github</a></li>
				<li><a href="https://drive.google.com/drive/u/0/my-drive">GoogleDrive</a></li>
				<li><a href="https://www.dropbox.com/home">DropBox</a></li>				
			</ul>

			<ul class="blue">
				<li style="font-size:22px">Social</li>
				<li><a href="https://reddit.com/">Reddit</a></li>
				<li><a href="https://www.resetera.com/">Resetera</a></li>				
				<li><a href="https://discord.com/channels/@me">Discord</a></li>
				<li><a href="https://twitter.com/Nevaleeen/likes?lang=en">Twitter</a></li>				
			</ul>

			<ul class="yellow">
				<li style="font-size:22px">Watch</li>
				<li><a href="https://www.youtube.com/">Youtube</a></li>
				<li><a href="https://www.twitch.tv/">Twitch</a></li>
				<li><a href="https://animixplay.to/">Animix</a></li>
			</ul>
		</nav>

		<div class="codes" id="codes">
			<script>
				function greeting(hour) {
					var greetingText;
					if (hour >= 5 && hour <= 11) {
						greetingText = "Good Morning";
					} else if (hour >= 12 && hour <= 16) {
						greetingText = "Good Afternoon";
					} else if ((hour >= 17 && hour <= 23) || (hour >= 0 && hour <= 4)) {
						greetingText = "Good Evening";
					} else {
						greetingText = "Hello";
					}
					return greetingText;
				}

			document.getElementById('greet').innerText = greeting((new Date()).getHours());

			//document.getElementById("main").innerHTML = Date();
			function updateClock() {
				var days = ['SUNDAY','MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY'];
				var m = new Date();
				var dateString =
				(days[ m.getDay() ]) + " " +
				("0" + m.getDate()).slice(-2) + "/" +
				("0" + (m.getMonth()+1)).slice(-2) +"/"+
				m.getFullYear() +" "+
				("0" + m.getHours()).slice(-2) + ":" +
				("0" + m.getMinutes()).slice(-2) + ":" +
				("0" + m.getSeconds()).slice(-2);

				// set the content of the element with the ID codes to the formatted string
				document.getElementById('codes').innerHTML = dateString;

				// call this function again in 1000ms
				setTimeout(updateClock, 1000);
			}
			updateClock(); // initial call

			// Set local storage
			var slideIx = Number(localStorage.getItem('slideIndex') || 1);

			var slideIndex = slideIx;
			showSlides(slideIndex);

			// Next/previous controls
			function plusSlides(n) {
				showSlides(slideIndex += n);
				localStorage.setItem('slideIndex', slideIndex);
				console.log(localStorage.getItem('slideIndex'));
			}

			// Show slides
			function showSlides(n) {
				var i;
				var slide = document.querySelector(".mySlides");
				var reqdVars = document.querySelector(".reqdVar");
				if (n > 23) {
					slideIndex = 1;
				}
				if (n < 1) {
					slideIndex = 23;
				}				
				slide.querySelector("img").src = `img/side${slideIndex}.gif`
				console.log(slideIndex)
			}

			// Theming
			const html = document.getElementById("html");

			// Themes list
			const colorchemes = ["default", "gruvbox", "nord", "catppuccin"];

			let changeTheme = (e) => {
				// Change theme key
				if (e.key == "c") {
					let currentThemeIndex = colorchemes.findIndex(color => color === html.dataset.theme );
					currentThemeIndex = (currentThemeIndex >= colorchemes.length - 1) ? 0 : currentThemeIndex + 1 ;
					html.dataset.theme = colorchemes[currentThemeIndex];
					localStorage.setItem("themeIndex", currentThemeIndex);

					let havematched = true;

					// Select thme slide by slide index.
					switch (currentThemeIndex) {
						case 0:
						slideIndex= 1;
						break;
						case 1:
						slideIndex=12;
						break;
						case 2:
						slideIndex=10;
						break;
            case 3:
						slideIndex=21;
						break;
						default:
            havematched = false;
							}
							if (havematched){
							localStorage.setItem("slideIndex", slideIndex);
							showSlides(slideIndex);
					}
				}
			}
			const currentTheme = localStorage.getItem("themeIndex");
			html.dataset.theme = colorchemes[currentTheme || 0];
			document.addEventListener("keyup", e => changeTheme(e))
			</script>
		</div>
	</body>
	</html>
